# Аудит: скорость и SEO по мировым практикам

**Цель:** сделать сайт топовым по скорости (Core Web Vitals) и SEO (Google, Yandex, AI).

**Источники:** Google Search Central, web.dev, Core Web Vitals, Яндекс.Вебмастер, рекомендации по E-E-A-T и Page Experience.

---

## 1. СКОРОСТЬ (Performance)

### 1.1 Core Web Vitals (целевые пороги)

| Метрика | Цель | Риски на сайте |
|--------|------|-----------------|
| **LCP** (Largest Contentful Paint) | ≤ 2.5 c | Шрифты Google блокируют рендер; один большой PNG без srcset; видео без poster |
| **INP** (Interaction to Next Paint) | ≤ 200 ms | Яндекс.Метрика загружается синхронно при старте; тяжёлые скрипты в main thread |
| **CLS** (Cumulative Layout Shift) | ≤ 0.1 | Часть изображений без явных width/height; баннер cookie появляется с задержкой |

### 1.2 Что уже хорошо

- Prerender всех страниц (SSR/статический HTML) — быстрый первый байт.
- Lazy loading изображений ниже первого экрана, `decoding="async"`, `fetchpriority="high"` для LCP-картинки на главной.
- Явные `width`/`height` у героевых изображений (меньше CLS).
- Preconnect на Google Fonts.
- Видео с `preload="metadata"` на главной; `playsinline`, `muted` для автовоспроизведения.

### 1.3 Пробелы и рекомендации

| Проблема | Практика | Действие |
|----------|----------|----------|
| **Шрифты Google** загружаются как `rel="stylesheet"` | Не блокировать рендер: self-host или `font-display: swap` + асинхронная загрузка | Самохостинг Inter (woff2) или загрузка шрифта через `<link rel="preload" as="font">` без блокирующего CSS; убрать `preload` на весь CSS Google |
| **Один большой PNG** для героя (нет WebP/AVIF, нет srcset) | Современные форматы + responsive images (web.dev) | Добавить WebP/AVIF и `<picture>` или `srcset`; при возможности сжать и ресайзить |
| **Яндекс.Метрика** выполняется сразу при загрузке | Отложить третьепольные скрипты: после `requestIdleCallback` или первого взаимодействия | Загружать tag.js после idle или после первого клика/скролла (если допустимо по аналитике) |
| **Логотип в шапке** без width/height | Все изображения с размерами (CLS) | Добавить явные width/height логотипу в layout |
| **Cookie-баннер** показывается через 1 c | Избегать больших сдвигов контента | Зарезервировать место под баннер (min-height) или показывать без сдвига |
| **_headers** | Долгий кэш статики на хостинге | В `public/_headers` заданы пути и заголовки (Netlify-формат); на другом хостинге настроить аналогичные Cache-Control |
| **Видео** на категориях без `preload="metadata"` | Минимизировать загрузку до взаимодействия | Проставить `preload="metadata"` всем `<video>` |

---

## 2. SEO (мировые практики)

### 2.1 Что уже хорошо

- Единый `lang="ru"` в `<html>`.
- Уникальные `title`, `description`, canonical, OG, Twitter на страницах.
- Разметка: LocalBusiness, Organization, WebSite, FAQPage, BreadcrumbList, Product/Service, ContactPage.
- Sitemap с ISO 8601 lastmod, указан в robots.txt.
- Prerender — контент в HTML для краулеров.
- Один H1 на контентную страницу, хлебные крошки (UI + JSON-LD).
- Внутренняя перелинковка («Другие услуги» с семантическими анкорами).
- BLUF в первом абзаце (цена, срок, город).

### 2.2 Пробелы и рекомендации

| Проблема | Практика | Действие |
|----------|----------|----------|
| Нет **theme-color** | Mobile UX, PWA (Chrome) | Добавить `<meta name="theme-color" content="#2A6AB2">` |
| Нет **dns-prefetch** для Метрики | Ускорить первый запрос к mc.yandex.ru | Добавить `dns-prefetch` (и при необходимости preconnect) для домена Метрики |
| Видео не в разметке | VideoObject для богатых сниппетов и понимания контента | Добавить JSON-LD VideoObject для ролика «Как замерить» (name, description, uploadDate, thumbnailUrl) |
| Нет **noindex** на /privacy в sitemap vs meta | Единая логика: если noindex — не обязательно в sitemap (по желанию можно оставить для карты) | Оставить как есть или убрать /privacy из sitemap при noindex (решение на выбор) |
| Trailing slash | Единый вид URL (Google, Яндекс) | Проверить редирект с/без слеша и canonical — сейчас местами с слешем в sitemap, без в путях; унифицировать |
| Консоль/индексация | Постоянный мониторинг | Регулярно проверять GSC и Яндекс.Вебмастер: индексация, CWV, ошибки сканирования |

---

## 3. ПРИОРИТЕТЫ ВНЕДРЕНИЯ

### Фаза A (быстрые победы, без смены инфраструктуры)

1. **Скорость:** Логотип в шапке — явные `width`/`height`; все видео — `preload="metadata"`.
2. **Скорость:** Отложенная загрузка Яндекс.Метрики (например, после `requestIdleCallback` + 2 s).
3. **SEO:** В глобальный `head`: `theme-color`, `dns-prefetch` для mc.yandex.ru.
4. **SEO:** На страницу с видео (главная/категории) — JSON-LD VideoObject.

### Фаза B (средний объём) — выполнено

5. ~~Шрифты~~: Inter самохостится через `@fontsource/inter` (cyrillic 400/500/700/900), Google Fonts отключены.
6. ~~Изображения~~: компонент `HeroImage` с `<picture>` (WebP + PNG fallback); генерация WebP — `npm run generate:hero-webp` (требует `sharp`).
7. Заголовки кэширования: применить _headers на хостинге (формат Netlify в `public/_headers`).

### Фаза C (стратегия)

8. Мониторинг CWV в GSC и Яндекс.Вебмастер; при необходимости — CDN, сжатие, оптимизация TTFB.
9. A/B тест отложенной Метрики на отказы и конверсии.

---

## 4. ЧЕКЛИСТ ПО СТРАНИЦАМ

- [ ] У каждой страницы уникальные title (≤ 60 символов) и description (≤ 160).
- [ ] Canonical указывает на итоговый URL (единый вид со/без слеша).
- [ ] Один H1 на страницу, логичная иерархия H2–H3.
- [ ] Изображения: alt, width, height; выше fold — приоритет загрузки.
- [ ] Нет пустых или дублирующих мета-тегов.
- [ ] JSON-LD валиден (проверка в Rich Results Test / Schema.org Validator).

---

*Документ обновлён по результатам аудита кода и рекомендациям Google Search Central, web.dev и Яндекс.Вебмастер.*
