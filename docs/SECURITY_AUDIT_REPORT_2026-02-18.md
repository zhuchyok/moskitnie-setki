# –û—Ç—á—ë—Ç –ø–æ –∞—É–¥–∏—Ç—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º
## –ü—Ä–æ–µ–∫—Ç –°–µ—Ç–∫–∏ 21 (–≤–µ—Ç–∫–∞ studio)

**–î–∞—Ç–∞:** 18 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–ü—Ä–æ–µ–∫—Ç:** `/Users/bikos/Documents/dev/setki-21`  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏:** –í–∏–∫—Ç–æ—Ä–∏—è (Team Lead), –ò–≥–æ—Ä—å (Backend), –ê–Ω–Ω–∞ (QA)

---

## 1. –õ–æ–∫–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç

**–ú–æ–¥–µ–ª—å:** `qwen2.5-coder:32b` (Ollama)  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (XSS, –∏–Ω—ä–µ–∫—Ü–∏–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏)

**–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** –ú–æ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ –≤—ã—è–≤–∏–ª–∞:
- –†–∏—Å–∫–∏ XSS –ø—Ä–∏ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ HTML –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –ó–∞–≥–ª—É—à–∫—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–∏–ª–µ—Ä–æ–≤ (–¥–∞–Ω–Ω—ã–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è)
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ email-—à–∞–±–ª–æ–Ω–∞—Ö

–ú–æ–¥–µ–ª—å –¥–∞–ª–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–≥–ª–∏ –≤ –æ—Å–Ω–æ–≤—É —Ä–∞–∑–¥–µ–ª–∞ ¬´–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é¬ª.

---

## 2. –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ API

### 2.1 POST /api/orders (—Ñ–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ –≤ Calculator.vue)

| –ê—Å–ø–µ–∫—Ç | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|--------|--------|--------|
| –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è | ‚úÖ | –°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: formName, formPhone, list_order, total_price_value |
| –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ | ‚ö†Ô∏è | Regex **—Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–π**: `\d{3}` –≤ —Å–∫–æ–±–∫–∞—Ö ‚Äî –Ω–æ–º–µ—Ä +7 (8352) 38-14-20 (4 —Ü–∏—Ñ—Ä—ã) **–Ω–µ –ø—Ä–æ–π–¥—ë—Ç** |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏ | ‚ùå | –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª–∏–Ω—ã, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ |
| XSS –≤ email | üî¥ | formName, formPhone, formAddress, formComment, list_order –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ HTML –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| –ü—É—Å—Ç—ã–µ –ø–æ–ª—è | ‚ö†Ô∏è | –ö–ª–∏–µ–Ω—Ç: —Ç–æ–ª—å–∫–æ `required` + –ø—Ä–æ–≤–µ—Ä–∫–∞ `form.agree`. –ù–µ—Ç `trim()` –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π ‚Äî –ø—Ä–æ–±–µ–ª—ã –ø—Ä–æ—Ö–æ–¥—è—Ç |
| –ò–Ω—ä–µ–∫—Ü–∏–∏ | ‚ö†Ô∏è | –î–∞–Ω–Ω—ã–µ –∏–¥—É—Ç –≤ nodemailer –∏ moskit-api. SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏ –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω—ã (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ API), –Ω–æ HTML-–∏–Ω—ä–µ–∫—Ü–∏—è –≤ –ø–∏—Å—å–º–µ ‚Äî —Ä–µ–∞–ª—å–Ω–∞ |

**–§–∞–π–ª—ã:** `components/Calculator.vue:231-273`, `server/api/orders.post.ts`

### 2.2 POST /api/contact (—Ñ–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞)

| –ê—Å–ø–µ–∫—Ç | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|--------|--------|--------|
| –í–∞–ª–∏–¥–∞—Ü–∏—è | ‚úÖ | `validateContactBody` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç name, phone, regex —Ç–µ–ª–µ—Ñ–æ–Ω–∞ |
| XSS –≤ email | üî¥ | body.name, body.phone, body.message –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ HTML –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| Unit-—Ç–µ—Å—Ç—ã | ‚úÖ | –ï—Å—Ç—å —Ç–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ |

**–§–∞–π–ª—ã:** `server/api/contact.post.ts`, `server/utils/contact-validation.ts`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –§–æ—Ä–º–∞ `/api/contact` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ —Ç–µ—Å—Ç–æ–≤, –Ω–æ –≤ —Ç–µ–∫—É—â–µ–º UI (contacts.vue) —Ñ–æ—Ä–º—ã –∑–∞—è–≤–∫–∏ –Ω–∞ –∑–≤–æ–Ω–æ–∫ –Ω–µ—Ç ‚Äî —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏. –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞ –µ—Å—Ç—å –≤ –¥—Ä—É–≥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ (–º–æ–¥–∞–ª–∫–∞, –≤–∏–¥–∂–µ—Ç), –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç API.

### 2.3 POST /api/v1/auth/login (dealers.vue)

| –ê—Å–ø–µ–∫—Ç | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|--------|--------|--------|
| –í–∞–ª–∏–¥–∞—Ü–∏—è | ‚ö†Ô∏è | –¢–æ–ª—å–∫–æ HTML `required` –Ω–∞ email, password. –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ email –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ |
| –û—Ç–ø—Ä–∞–≤–∫–∞ | ‚úÖ | –î–∞–Ω–Ω—ã–µ —É—Ö–æ–¥—è—Ç –≤–æ –≤–Ω–µ—à–Ω–∏–π moskit-api. –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ API |
| –û—à–∏–±–∫–∏ | ‚úÖ | –û—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ `error` –±–ª–æ–∫–µ |

**–§–∞–π–ª—ã:** `pages/dealers.vue:66-121`

### 2.4 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–∏–ª–µ—Ä–æ–≤ (dealers.vue)

| –ê—Å–ø–µ–∫—Ç | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|--------|--------|--------|
| –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö | üî¥ | **–ó–∞–≥–ª—É—à–∫–∞:** `await new Promise(resolve => setTimeout(resolve, 1000))` ‚Äî –¥–∞–Ω–Ω—ã–µ name, city, phone, email, password **–Ω–∏–∫—É–¥–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è** |
| –í–∞–ª–∏–¥–∞—Ü–∏—è | ‚ùå | –ü–æ–ª—è required, –Ω–æ –ø—Ä–∏ ¬´–æ—Ç–ø—Ä–∞–≤–∫–µ¬ª –Ω–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è |

**–§–∞–π–ª—ã:** `pages/dealers.vue:106-109`

### 2.5 –ê–¥–º–∏–Ω–∫–∞: –¥–∏–ª–µ—Ä—ã (admin/dealers/index.vue)

| –ê—Å–ø–µ–∫—Ç | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|--------|--------|--------|
| –û—Ç–ø—Ä–∞–≤–∫–∞ | ‚úÖ | PUT/POST –Ω–∞ moskit-api —Å –ø–æ–ª–Ω—ã–º –æ–±—ä–µ–∫—Ç–æ–º form |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ | ‚ö†Ô∏è | –¢–æ–ª—å–∫–æ `required` –Ω–∞ name, city, phone. –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ email, —Ç–µ–ª–µ—Ñ–æ–Ω–∞, URL –ª–æ–≥–æ—Ç–∏–ø–∞ |
| XSS/–∏–Ω—ä–µ–∫—Ü–∏–∏ | ‚ö†Ô∏è | –î–∞–Ω–Ω—ã–µ (logo_url, primary_color, requisites, privacy_policy_url –∏ —Ç.–¥.) —É—Ö–æ–¥—è—Ç –≤ API. –†–∏—Å–∫ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç moskit-api |
| –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ | ‚ö†Ô∏è | `accept="image/*"` ‚Äî –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –∏ —Ç–∏–ø–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ |

**–§–∞–π–ª—ã:** `pages/admin/dealers/index.v.vue:115-172`

---

## 3. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º (UI)

### 3.1 Calculator.vue (—Ñ–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞)

| –≠–ª–µ–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---------|--------|-------------|
| –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è | ‚ö†Ô∏è | name, phone ‚Äî `required`. –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ –ø—É—Å—Ç–æ–º –ø–æ–ª–µ –¥–æ submit |
| –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | ‚ùå | –ù–µ—Ç `border-red-500` –∏–ª–∏ `ring-red-500` –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º –ø–æ–ª–µ |
| –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö | ‚ö†Ô∏è | –¢–æ–ª—å–∫–æ toast –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–µ—Ä–≤–µ—Ä–∞. –ù–µ—Ç per-field —Å–æ–æ–±—â–µ–Ω–∏–π |
| –ú–∞—Å–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ | ‚ùå | Placeholder ¬´+7 (___) ___-__-__¬ª, –Ω–æ –º–∞—Å–∫–∏ –≤–≤–æ–¥–∞ –Ω–µ—Ç ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–≤–µ—Å—Ç–∏ —á—Ç–æ —É–≥–æ–¥–Ω–æ |
| –ß–µ–∫–±–æ–∫—Å —Å–æ–≥–ª–∞—Å–∏—è | ‚úÖ | –í–∏–∑—É–∞–ª—å–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–Ω–æ–ø–∫—É –ø—Ä–∏ `!form.agree` |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å `:class="{ 'border-red-500': errors.name }"` –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –ø–æ–¥ –ø–æ–ª–µ–º –ø—Ä–∏ submit —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

### 3.2 dealers.vue (–≤—Ö–æ–¥/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)

| –≠–ª–µ–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---------|--------|-------------|
| –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è | ‚ö†Ô∏è | required –Ω–∞ –≤—Å–µ—Ö –ø–æ–ª—è—Ö –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞ |
| –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | ‚ùå | –ù–µ—Ç per-field. –ï—Å—Ç—å –æ–±—â–∏–π –±–ª–æ–∫ `v-if="error"` —Å —Ç–µ–∫—Å—Ç–æ–º –æ—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ |
| –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è | ‚ö†Ô∏è | –¢–æ–ª—å–∫–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –ü—Ä–∏ –ø—É—Å—Ç—ã—Ö –ø–æ–ª—è—Ö ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ |

### 3.3 –ê–¥–º–∏–Ω–∫–∞ (admin/dealers/index.vue)

| –≠–ª–µ–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---------|--------|-------------|
| –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è | ‚ö†Ô∏è | required –Ω–∞ name, city, phone –≤ —Ç–∞–±–µ ¬´–û—Å–Ω–æ–≤–Ω–æ–µ¬ª |
| –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | ‚ùå | –ù–µ—Ç. –ü—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Äî —Ç–æ–ª—å–∫–æ toast |
| –í–∞–ª–∏–¥–∞—Ü–∏—è URL/email | ‚ùå | logo_url, privacy_policy_url, emails ‚Äî –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ |

---

## 4. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏ —Ä–∏—Å–∫–∏

### 4.1 XSS –≤ email-–ø–∏—Å—å–º–∞—Ö (–≤—ã—Å–æ–∫–∏–π)

**–ì–¥–µ:** `server/api/orders.post.ts`, `server/api/contact.post.ts`

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –ø–æ–ª–µ –∏–º–µ–Ω–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```html
<script>alert('xss')</script>
```
–∏–ª–∏
```html
<img src=x onerror="alert(1)">
```

–ü—Ä–∏ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–µ –≤ HTML –ø–∏—Å—å–º–∞ –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ø–∞–¥—É—Ç –≤ –ø–∏—Å—å–º–æ. –†–∏—Å–∫: –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –ø–∏—Å–µ–º –≤ –∫–ª–∏–µ–Ω—Ç–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HTML/JS –≤–æ–∑–º–æ–∂–Ω–∞ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

### 4.2 –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ orders

**–§–∞–π–ª:** `server/api/orders.post.ts:36`

Regex: `^\+7\s?\(\d{3}\)\s?\d{3}-\d{2}-\d{2}$|^\+7\d{10}$`

- –ì–æ—Ä–æ–¥—Å–∫–æ–π –Ω–æ–º–µ—Ä +7 (8352) 38-14-20 –∏–º–µ–µ—Ç **4 —Ü–∏—Ñ—Ä—ã** –≤ —Å–∫–æ–±–∫–∞—Ö ‚Äî –Ω–µ –ø—Ä–æ–π–¥—ë—Ç.
- –í `contact-validation.ts` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `\d{3,4}` ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–æ–±—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è) –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç—ã: +7XXXXXXXXXX, +7 (XXX) XXX-XX-XX, +7 (XXXX) XX-XX-XX.

### 4.3 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–∏–ª–µ—Ä–æ–≤ ‚Äî –∑–∞–≥–ª—É—à–∫–∞

–î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–∏–º—è, –≥–æ—Ä–æ–¥, —Ç–µ–ª–µ—Ñ–æ–Ω, email, –ø–∞—Ä–æ–ª—å) –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ¬´–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞¬ª, –Ω–æ –∑–∞—è–≤–∫–∞ –Ω–∏–∫—É–¥–∞ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç.

### 4.4 CORS `*`

**–§–∞–π–ª:** `server/api/orders.post.ts:6`, `server/api/contact.post.ts:5`

```javascript
setHeader(event, 'Access-Control-Allow-Origin', '*')
```

–í production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å origin –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –¥–æ–º–µ–Ω–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://www.setki21.ru`).

---

## 5. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 5.1 –ö—Ä–∏—Ç–∏—á–Ω—ã–µ (—Å–¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å)

1. **–≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ HTML –≤ email-—à–∞–±–ª–æ–Ω–∞—Ö**
   - –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `escapeHtml(str: string)` –∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∫–æ –≤—Å–µ–º –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º (formName, formPhone, formAddress, formComment, list_order, name, phone, message).
   - –ü—Ä–∏–º–µ—Ä: `const escapeHtml = (s) => String(s).replace(/[&<>"']/g, c => ({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[c]))`

2. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ç–µ–ª–µ—Ñ–æ–Ω–∞**
   - –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ `server/utils/phone-validation.ts`.
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å: +7XXXXXXXXXX, +7 (XXX) XXX-XX-XX, +7 (XXXX) XX-XX-XX.
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ orders.post.ts –∏ contact-validation.ts.

3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–ª–∏ —É–±—Ä–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –¥–∏–ª–µ—Ä–æ–≤**
   - –õ–∏–±–æ –¥–æ–±–∞–≤–∏—Ç—å API –∏ –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö, –ª–∏–±–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —Å–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥–∫—É ¬´–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è¬ª –∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ ¬´–í—Ö–æ–¥¬ª.

### 5.2 –í–∞–∂–Ω—ã–µ

4. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫ –≤ Calculator.vue**
   - –ü—Ä–∏ submit —Å –ø—É—Å—Ç—ã–º–∏/–Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –ø–æ–ª—è–º–∏: `border-red-500`, —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –ø–æ–¥ –ø–æ–ª–µ–º.
   - –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.

5. **–ú–∞—Å–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ö**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, imask, v-mask) –∏–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä –¥–ª—è –ø–æ–ª–µ–π —Ç–µ–ª–µ—Ñ–æ–Ω–∞.

6. **Trim –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π**
   - –í Calculator.vue: `formName: form.name.trim()`, `formPhone: form.phone.trim()` –∏ —Ç.–¥.

7. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã –∏ —Å–∏–º–≤–æ–ª–æ–≤**
   - –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–ª–∏–Ω—É –∏–º–µ–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 100 —Å–∏–º–≤–æ–ª–æ–≤), –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (500), –∞–¥—Ä–µ—Å–∞ (200).
   - –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

### 5.3 –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ

8. **–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å CORS –≤ production**
   - `Access-Control-Allow-Origin: https://www.setki21.ru` (–∏–ª–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞).

9. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ –¥–∏–ª–µ—Ä–æ–≤**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ email, URL (logo_url, privacy_policy_url) –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2 MB).

10. **Rate limiting**
    - –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ /api/orders –∏ /api/contact –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞ –∏ DoS.

---

## 6. –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

- [ ] –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ HTML –≤ orders.post.ts
- [ ] –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ HTML –≤ contact.post.ts
- [ ] –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (orders + contact)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–ª–∏ —Å–∫—Ä—ã—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –¥–∏–ª–µ—Ä–æ–≤
- [ ] –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫ –≤ Calculator.vue
- [ ] –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ Calculator.vue
- [ ] Trim –ø–æ–ª–µ–π –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- [ ] –ú–∞—Å–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –ø–æ–ª–µ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] CORS –≤ production
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ –¥–∏–ª–µ—Ä–æ–≤
- [ ] Rate limiting (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## 7. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| Endpoint | –ú–µ—Ç–æ–¥ | –í–∞–ª–∏–¥–∞—Ü–∏—è | XSS-—Ä–∏—Å–∫ |
|----------|-------|-----------|----------|
| /api/orders | POST | –ß–∞—Å—Ç–∏—á–Ω–∞—è (—Ç–µ–ª–µ—Ñ–æ–Ω —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–π) | –î–∞ (email) |
| /api/contact | POST | –î–∞ (contact-validation) | –î–∞ (email) |
| /api/v1/auth/login | POST | –ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ moskit-api | ‚Äî |
| /api/v1/admin/dealers | GET, POST, PUT | –ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ moskit-api | ‚Äî |
| /api/v1/admin/upload | POST | –ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ moskit-api | ‚Äî |

---

*–û—Ç—á—ë—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –í–∏–∫—Ç–æ—Ä–∏–µ–π –∏ —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏ Atra Core (–ò–≥–æ—Ä—å, –ê–Ω–Ω–∞) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ qwen2.5-coder:32b.*
